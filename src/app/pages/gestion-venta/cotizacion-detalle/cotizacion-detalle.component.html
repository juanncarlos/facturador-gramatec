<div class="row ">
    <div class="col col-md-2">
        <div class="form-group">
            <label class="text">Fecha Inicio:</label>
            <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" name="fechaInicio" type="date">
                <!-- <div class="input-group-append">
                    <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                </div> -->
            </div>
        </div>
    </div>
    <div class="col col-md-2">
        <div class="form-group">
            <label class="text">Fecha Fin:</label>
            <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" name="fechaFin" type="date">
                <!-- <div class="input-group-append">
                    <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                </div> -->
            </div>
        </div>
    </div>

    <div class="col col-md-2">
        <div class="form-group">
            <label class="text"></label>
            <div class="input-group">
                <button class="btn btn-primary">Buscar</button>
            </div>
        </div>
    </div>
</div>

<div class="row mb-1">
    <div class="col">
        <div class="input-group mb-3 box-shadow">
            <div class="input-group-prepend">
                <span class="input-group-text border-top-0 border-left-0 border-bottom-0"><i class="fa fa-search"></i></span>
            </div>
            <input type="text" placeholder="Buscar..." class="form-control border-0">
            <div class="input-group-append">
                <span class="agregar input-group-text border-top-0 border-right-0 border-bottom-0" style="cursor:pointer" data-toggle="modal" data-target="#exampleModal"><i class="fa fa-user-plus"></i></span>
                <span class="input-group-text border-top-0 border-right-0 border-bottom-0 " style="cursor:pointer"><i class="fa fa-arrow-down"></i></span>
                <span class="input-group-text border-top-0 border-right-0 border-bottom-0 " style="cursor:pointer"><i class="fa fa-arrow-up"></i></span>

            </div>
        </div>
    </div>
</div>



<!-- listado  -->

<div class="row">
    <div class="col-12">
        <div class="table-responsive bg-white box-shadow">
            <table class="table table-hover">
                <colgroup>
                    <col class="col1">
                    <col class="col2">
                    <col class="col3">
                    <col class="col4">
                    <col class="col5">
                    <col class="col6">
                    <col class="col7">
                </colgroup>
                <thead>
                    <tr>

                        <th class="text-center">FECHA</th>
                        <th class="text-center">SERIE</th>
                        <th class="text-center">NUMERO</th>
                        <th class="text-center">RUC</th>
                        <th class="text-center">CLIENTE</th>
                        <th class="text-center">TOTAL</th>
                        <th class="text-center"></th>

                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <!-- <td class="align-middle">
                            <img *ngIf="user.profile.image" class="rounded-circle" [src]="user.profile.image" width="40">
                            <img *ngIf="!user.profile.image" class="rounded-circle" src="assets/img/users/default-user.jpg" width="40">
                        </td> -->
                        <td class="align-middle text-center">11/05/2023</td>
                        <td class="align-middle text-center">F001</td>
                        <td class="align-middle text-center">250</td>
                        <td class="align-middle text-center">12345678912</td>
                        <td class="align-middle">GRAN MANAGER TECHNOLOGY CONSULTING SOCIEDAD ANONIMA - GRAMATEC S.A. </td>
                        <td class="align-middle text-center ">1500.50</td>
                        <td class="align-middle text-center ">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="imprimir" id="A4" value="A4">

                            </div>
                            <!-- <a href="/descargas/" download> <button class="btn btn-success btn-sm" download><i class="fa fa-file-pdf-o"></i></button></a> -->
                        </td>
                        <!-- <div class="btn-group " role="group ">

                            <button class="btn btn-warning btn-sm "><i class="fa fa-pencil "></i></button>
                            <button class="btn btn-danger btn-sm "><i class="fa fa-trash "></i></button>
                        </div> -->



                    </tr>
                    <tr>

                        <td class="align-middle text-center">11/05/2023</td>
                        <td class="align-middle text-center">B001</td>
                        <td class="align-middle text-center">1250</td>
                        <td class="align-middle text-center">12345678</td>
                        <td class="align-middle ">Lorem ipsum dolor sit amet consectetur adipis</td>
                        <td class="align-middle text-center ">11500.50</td>
                        <td class="align-middle text-center ">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="imprimir" id="A4" value="A4">

                            </div>

                            <!-- <a href="/descargas/" download> <button class="btn btn-success btn-sm" download><i class="fa fa-file-pdf-o"></i></button></a> -->
                        </td>
                        <!-- <div class="btn-group" role="group ">
                            <button class="btn btn-warning btn-sm  "><i class="fa fa-pencil "></i></button>
                            <button class="btn btn-danger btn-sm "><i class="fa fa-trash "></i></button>
                        </div> -->



                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>





<!-- Modal -->


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div class="modal-body">

                <div class="row">
                    <div class="form-group col-md-2 ">
                        <label class="text-gray ">Cantidad</label>
                        <input name="codigoTributo " class="form-control validation-field " type="number " [(ngModel)]="cantidadProductoModal">
                    </div>
                    <div class="form-group col-md-3 ">
                        <label class="text-gray mr-1">Código de barras</label> <input type="checkbox" aria-label="Checkbox for following text input">
                        <input name="codigoTributo " class="form-control validation-field " type="text ">

                    </div>

                    <div class="form-group col-md-7 ">
                        <label for=""></label>
                        <input type="text" class="form-control" #nombreProductoInput [(ngModel)]="terminoBusqueda" (input)="filtrarProductos()" (focus)="mostrarListaProductos = true" (blur)="clearFilter()" placeholder=" Buscar producto ">
                        <div class="lista" *ngIf="productosFiltrados.length> 0">
                            <ul>
                                <li *ngFor="let producto of productosFiltrados" (click)="agregarProducto(producto)" style="cursor: pointer;" >
                                    {{ producto.nombre }} - Precio: ${{ producto.precioVenta }}
                                    <!-- <button (click)="agregarProducto(producto)" class="btn btn-primary btn-sm "><i class="fa fa-check-square"></i></button> -->
                                </li>
                            </ul>
                        </div>
                        <!--  ========================================== -->

                    </div>
                </div>

                <div class="row contenedor-tabla">
                    <div class="col-12 ">
                        <div class="table-responsive bg-white ">
                            <table class="table table-hover ">
                                <colgroup>
                                    <col class="col11">
                                    <col class="col12">
                                    <col class="col13">
                                    <col class="col14">
                                    <col class="col15">

                                </colgroup>
                                <thead class="thead-dark ">
                                    <tr>
                                        <th class="align-middle text-center">CANTIDAD</th>
                                        <th class="align-middle text-center">DESCRIPCION</th>
                                        <th class="align-middle text-center">PREC. UNIT</th>

                                        <th class="align-middle text-center">TOTAL</th>
                                        <th class="align-middle text-center">ACCIONES</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="fila-producto" *ngFor="let producto of productosSeleccionados; let i = index">
                                        <td width="50px">
                                            <div class="input-group">
                                                <input type="number" class="form-control">
                                            </div>
                                        </td>

                                        <td>{{ producto.nombre }}</td>

                                        <td width="50px">
                                            <div class="input-group">
                                                <input type="number" class="form-control" [value]="producto.precioVenta">
                                            </div>
                                        </td>

                                        <td> </td>
                                        <td><button class="btn btn-danger btn-sm " (click)="eliminarProducto(producto)"><i class="fa fa-trash "></i></button></td>
                                    </tr>

                                    <tr>
                                        <td> </td>
                                        <td> </td>
                                        <td> </td>
                                        <td class="align-middle text-center"> </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="row ">
                    <div class="col col-md-9 ">
                        <div class="row ">
                            <div class="form-group col-md-6 ">
                                <label class="text-gray ">Nombre / Razón Social</label>
                                <input type="text" class="form-control"  [(ngModel)]="clientesterminoBusqueda" (input)="filtrarClientes()" (focus)="mostrarListaClientes = true" (blur)="limpiarFiltroCliente()" placeholder=" Buscar cliente ">
                                <div class="lista" *ngIf="clientesFiltrados.length> 0">
                                    <ul>
                                     <li *ngFor="let cliente of clientesFiltrados" (click)="agregarCliente(cliente)" style="cursor: pointer;" >
                                            {{ cliente.nombre }}
                                    
                                     </li>
                                 </ul>
                                </div>
                            </div>
                            <!-- <div class="form-group col-md-4">
                                <label class="text-gray">DNI/RUC</label>
                                <input name="dniRuc" class="form-control validation-field" type="number" (keydown.enter)="buscarClientePorDniRuc()" [(ngModel)]="dniRucInput">
                            </div> -->
                            <div class="form-group col-md-3">
                                <label class="text-gray">DNI/RUC</label>
                                <input name="dniRuc" class="form-control" type="text" (keydown)="validarInput($event)" (keydown.enter)="buscarClientePorDniRuc()" [(ngModel)]="dniRucInput" autocomplete="off">
                                <div *ngIf="isDniRucInvalid()" class="text-danger">
                                    El DNI debe tener 8 dígitos y el RUC debe tener 11 dígitos.
                                </div>
                            </div>  
                            <div class="form-group col-md-3">
                                <label class="text-gray">.</label>
                                <button class="btn btn-primary" (click)="abrirModalCliente(modalAgregarCliente)">Agregar Cliente</button> 
                            </div>                  
                        </div> 

                        <div class="row">
                            <div class="form-group col-md-12">
                                <input name="nombreCliente" class="form-control validation-field" type="text" [value]="clienteSeleccionado.nombre" readonly>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12" >
                                <input name="direccionCliente" class="form-control validation-field" type="text" [value]="clienteSeleccionado.direccion" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="col col-md-3 ">
                        <div class="row ">
                            <div class="form-group col-md-12 ">
                                <label class="form-control-label text-gray ">Forma de pago</label>
                                <select formControlName="unidadMedida " name="unidadMedida " class="form-control ">
                                <option>Contado</option>
                                <option>Crédito</option>
                                <option>Yape</option>
                                <option>Plin</option>
                                <option>Tarjeta</option>
                            </select>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="form-group col-md-12 ">
                                <label class="form-control-label text-gray ">Tipo moneda</label>
                                <select formControlName="unidadMedida " name="unidadMedida " class="form-control ">
                                <option>soles</option>
                                <option>dolares</option>
                                
                            </select>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="form-group col-md-12 ">
                                <label class="form-control-label text-gray ">Tiempo de entrega</label>
                                <select formControlName="unidadMedida " name="unidadMedida " class="form-control ">
                                <option>1 Día</option>
                                <option>7 Días</option>
                                <option>15 Días</option>
                                
                            </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 bg-white text-center py-1 ">
                        <button class="btn btn-success mr-1 " type="submit "><span>Agregar</span><span>Actualizar</span></button>
                        <button type="button " class="btn btn-danger " data-dismiss="modal">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>





<!-- Modal Agregar cliente -->
<ng-template #modalAgregarCliente>
    <div class="contenedor-modal-agregar">
        <div class="modal-header text-center">
            <h4 class="modal-title text-center">AGREGAR</h4>
        </div>
        <div class="modal-body">
            <form>
                <div class="tab-content col-12 border-0">
                    <div class="tab-pane active" id="basic">
                        <div class="row">
                            <div class="form-group col-md-5">
                                <label class="text-gray"> Tipo Documento </label>
                                <select [(ngModel)]="nuevoDato.tipoDocumento" name="tipoDocumento" id="tipoDocumento" class="form-control">
                                    <option value="DNI">DNI</option>
                                    <option value="RUC">RUC</option>
                                    <option value="Otro">Otro documento</option>
                                  </select>
                                <!-- <input name="nombre" id="nombre" [(ngModel)]="nuevoDato.nombre" class="form-control validation-field" type="text" autocomplete="off" required> -->
                            </div>
                            <div class="form-group col-md-5">
                                <label class="text-gray">Número</label>
                                <input name="numeroDocumento" id="numeroDocumento" [(ngModel)]="nuevoDato.numeroDocumento" class="form-control validation-field" type="number" autocomplete="off">
                            </div>
                            <div class="form-group col-md-2 contenedor-ico-buscar">
                                <label class="text-gray">Buscar</label>
                                <span (mouseenter)="MensajeBuscarCliente = true" (mouseleave)="MensajeBuscarCliente = false"  class="agregar input-group-text border-top-0 border-right-0 border-bottom-0 box-shadow" style="cursor:pointer"><i class="fa fa-search text-primary"></i></span>
                                <div class="mensaje" *ngIf="MensajeBuscarCliente">
                                    Buscar Cliente
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12">
                                <label class="text-gray">Nombre</label>
                                <input name="nombre" id="nombre" [(ngModel)]="nuevoDato.nombre" class="form-control validation-field" type="text " autocomplete="off">
                            </div>                          
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12">
                                <label class="text-gray">Dirección</label>
                                <input name="direccion" id="direccion" [(ngModel)]="nuevoDato.direccion" class="form-control validation-field" type="text" autocomplete="off">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label class="text-gray">Departamento</label>
                                <select [(ngModel)]="nuevoDato.departamento" name="departamento" id="departamento" class="form-control">
                                    <option value="DNI">DNI</option>
                                    <option value="RUC">RUC</option>
                                    <option value="Otro">Otro documento</option>
                                  </select>
                            </div>
                            <div class="form-group col-md-4">
                                <label class="text-gray">Provincia</label>
                                <select [(ngModel)]="nuevoDato.provincia" name="provincia" id="provincia" class="form-control">
                                    <option value="DNI">DNI</option>
                                    <option value="RUC">RUC</option>
                                    <option value="Otro">Otro documento</option>
                                  </select>
                            </div>
                            <div class="form-group col-md-4">
                                <label class="text-gray">Distrito</label>
                                <select [(ngModel)]="nuevoDato.distrito" name="distrito" id="distrito" class="form-control">
                                    <option value="DNI">DNI</option>
                                    <option value="RUC">RUC</option>
                                    <option value="Otro">Otro documento</option>
                                  </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="text-gray">Activo</label>
                                <input name="activo" id="activo" [(ngModel)]="nuevoDato.activo" class="form-control validation-field" type="text" autocomplete="off" readonly>
                            </div>
                            <div class="form-group col-md-6">
                                <label class="text-gray">Habido</label>
                                <input name="habido" id="habido" [(ngModel)]="nuevoDato.habido" class="form-control validation-field" type="text" autocomplete="off" readonly>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label class="text-gray">Correo</label>
                                <input name="correo" id="correo" [(ngModel)]="nuevoDato.correo" class="form-control validation-field" type="email" autocomplete="off">
                            </div>
                            <div class="form-group col-md-6">
                                <label class="text-gray">Celular</label>
                                <input name="celular" id="celular" [(ngModel)]="nuevoDato.celular" class="form-control validation-field" type="number" autocomplete="off">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12">
                                <label class="text-gray">Nota</label>
                                <textarea name="nota" id="nota" [(ngModel)]="nuevoDato.nota" class="form-control validation-field" type="text" autocomplete="off"></textarea>
                            </div>
                            
                        </div>
                        
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger btn-cancelar-modal" (click)="cerrarModalCliente()">Cancelar</button>
            <button type="button" class="btn btn-success btn-guardar-modal" (click)="agregarDato()">Guardar</button>
        </div>
    </div>
</ng-template>

